
UDATA=	UnicodeData.txt

unicode.c: gen genZscodes copyright ${UDATA}
	( cat ${SRCDIR}/copyright; \
	  echo ; \
	  echo '#include "unicode.h"'; \
	  echo ; \
	  echo "/* generated by gen on `date` */"; \
	 ./gen ${SRCDIR}/${UDATA} 11 Cf Cf; \
	 ./gen ${SRCDIR}/${UDATA} 14 Zs Zs; \
	 ./gen ${SRCDIR}/${UDATA} 11 IS '$$_' Lu Ll Lt Lm Lo Nl; \
	 ./gen ${SRCDIR}/${UDATA} 11 IP '$$_' Lu Ll Lt Lm Lo Nl Mn Mc Nd Pc; \
	 ${SHELL} ${SRCDIR}/genZscodes ${SRCDIR}/${UDATA}; \
	 ) > $@

#
# analyse the unicode data, looking for the best hit ratio
#
analyse: gen
	 ./gen ${SRCDIR} - Cf
	 ./gen ${SRCDIR} - Zs
	 ./gen ${SRCDIR} - '$$_' Lu Ll Lt Lm Lo Nl
	 ./gen ${SRCDIR} - '$$_' Lu Ll Lt Lm Lo Nl Mn Mc Nd Pc

clean:
	rm -f unicode.c gen
