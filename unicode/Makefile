
#
# $Id$
#
# Simple rules to make the unicode.c tables
#
#

UDATA=	UnicodeData.txt
srcdir=	.

unicode.c: gen genZscodes copyright ${UDATA}
	( cat ${srcdir}/copyright; \
	  echo ; \
	  echo '#include "unicode.h"'; \
	  echo ; \
	  echo "/* generated by gen on `date` */"; \
	 ./gen ${srcdir}/${UDATA} 11 Cf Cf; \
	 ./gen ${srcdir}/${UDATA} 14 Zs Zs; \
	 ./gen ${srcdir}/${UDATA} 11 IS '$$_' Lu Ll Lt Lm Lo Nl; \
	 ./gen ${srcdir}/${UDATA} 11 IP '$$_' Lu Ll Lt Lm Lo Nl Mn Mc Nd Pc; \
	 ${SHELL} ${srcdir}/genZscodes ${srcdir}/${UDATA}; \
	 ) > $@
	cp $@ ${srcdir}/../libsee/unicode.c

#
# I used this to analyze the best factoring ratio for the tables.
# The best values have since been hard coded.
#
analyse: gen
	 ./gen ${srcdir} - Cf
	 ./gen ${srcdir} - Zs
	 ./gen ${srcdir} - '$$_' Lu Ll Lt Lm Lo Nl
	 ./gen ${srcdir} - '$$_' Lu Ll Lt Lm Lo Nl Mn Mc Nd Pc

#
# Get the latest unicode tables
#
UnicodeData.txt:
	ftp http://www.unicode.org/Public/UNIDATA/UnicodeData.txt
SpecialCasing.txt:
	ftp http://www.unicode.org/Public/UNIDATA/SpecialCasing.txt

clean:
	rm -f unicode.c gen
	#rm -f UnicodeData.txt SpecialCasing.txt
